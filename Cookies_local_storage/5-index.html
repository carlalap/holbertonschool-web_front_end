<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>5. Local storage</title>
    <script src="https://cdn.jsdelivr.net/npm/js-cookie@rc/dist/js.cookie.min.js"></script>
</head>

<body>
    <h1>Available Items</h1>
    <script>
        //Array that contain all the available items.
        let availableItems = ['Shampoo','Soap','Sponge','Water'];

        function addItemToCart(item) {
            window.localStorage.setItem(item, 'true');
            displayCart();
        }
            function createStore() {
                let ulist = document.createElement("ul");

                availableItems.forEach(function (item) {
                    let lsItem = document.createElement("li");
                    lsItem.textContent = item;
                    lsItem.addEventListener("click", function () {
                        addItemToCart(item);
                    });
                    ulist.appendChild(lsItem);
                });
                document.body.appendChild(ulist);
            }

            function displayCart() {
                if (window.localStorage.length > 0) {
                    let paragraph = document.createElement("p");
                    let text = document.createTextNode(
                        `You previously had ${window.localStorage.length} items in your cart`
                    );
                    paragraph.appendChild(text);
                    document.body.appendChild(paragraph);
                }
            }
            if (typeof window.localStorage !== 'undefined') {
                try {
                    window.localStorage.setItem('test', 'test');
                    if (window.localStorage.getItem('test') === 'test') {
                        window.localStorage.removeItem('test');
                        createStore();
                        displayCart();
                        } else {
                        window.alert('Sorry, your browser does not support Web storage. Try again with a better one');
                        }
                } catch {
                    window.alert('Sorry, your browser does not support Web storage. Try again with a better one');
                }
                } else {
                    window.alert('Sorry, your browser does not support Web storage. Try again with a better one');
                }
      
    </script>
</body>
</html>